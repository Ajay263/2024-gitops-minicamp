{"uid":"86772ee8705bd067","name":"test_dag_retries[dags/dbt_docs_generator.py]","fullName":"test.test_dags_general#test_dag_retries","historyId":"0f365ff60f191dc6df0fbad309cf102a","time":{"start":1744710204445,"stop":1744710204446,"duration":1},"description":"\n    Test if a DAG has retries set to an appropriate value.\n    \n    Retries help with task resilience. This test ensures tasks will retry\n    at least twice before failing permanently.\n    ","descriptionHtml":"<pre><code>Test if a DAG has retries set to an appropriate value.\n\nRetries help with task resilience. This test ensures tasks will retry\nat least twice before failing permanently.\n</code></pre>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"dag","time":{"start":1744710204451,"stop":1744710204567,"duration":116},"status":"broken","statusMessage":"sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: dag\n[SQL: SELECT dag.dag_display_name, dag.dag_id, dag.root_dag_id, dag.is_paused, dag.is_subdag, dag.is_active, dag.last_parsed_time, dag.last_pickled, dag.last_expired, dag.scheduler_lock, dag.pickle_id, dag.fileloc, dag.processor_subdir, dag.owners, dag.description, dag.default_view, dag.schedule_interval, dag.timetable_description, dag.dataset_expression, dag.max_active_tasks, dag.max_active_runs, dag.max_consecutive_failed_dag_runs, dag.has_task_concurrency_limits, dag.has_import_errors, dag.next_dagrun, dag.next_dagrun_data_interval_start, dag.next_dagrun_data_interval_end, dag.next_dagrun_create_after \nFROM dag \nWHERE dag.dag_id = ?]\n[parameters: ('dbt_docs_generator',)]\n(Background on this error at: https://sqlalche.me/e/14/e3q8)\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/_pytest/fixtures.py\", line 1140, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/_pytest/fixtures.py\", line 898, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n  File \"/home/runner/work/2024-gitops-minicamp/2024-gitops-minicamp/airflow/test/conftest.py\", line 24, in dag\n    return dagbag.get_dag(dag_id)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/airflow/utils/session.py\", line 97, in wrapper\n    return func(*args, session=session, **kwargs)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/airflow/models/dagbag.py\", line 267, in get_dag\n    orm_dag = DagModel.get_current(root_dag_id, session=session)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/airflow/api_internal/internal_api_call.py\", line 166, in wrapper\n    return func(*args, **kwargs)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/airflow/utils/session.py\", line 94, in wrapper\n    return func(*args, **kwargs)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/airflow/models/dag.py\", line 3950, in get_current\n    return session.scalar(select(cls).where(cls.dag_id == dag_id))\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/sqlalchemy/orm/session.py\", line 1747, in scalar\n    return self.execute(\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/sqlalchemy/orm/session.py\", line 1717, in execute\n    result = conn._execute_20(statement, params or {}, execution_options)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1710, in _execute_20\n    return meth(self, args_10style, kwargs_10style, execution_options)\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/sqlalchemy/sql/elements.py\", line 334, in _execute_on_connection\n    return connection._execute_clauseelement(\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1577, in _execute_clauseelement\n    ret = self._execute_context(\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1953, in _execute_context\n    self._handle_dbapi_exception(\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 2134, in _handle_dbapi_exception\n    util.raise_(\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/sqlalchemy/util/compat.py\", line 211, in raise_\n    raise exception\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/sqlalchemy/engine/base.py\", line 1910, in _execute_context\n    self.dialect.do_execute(\n  File \"/opt/hostedtoolcache/Python/3.9.21/x64/lib/python3.9/site-packages/sqlalchemy/engine/default.py\", line 736, in do_execute\n    cursor.execute(statement, parameters)\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"afterStages":[],"labels":[{"name":"parentSuite","value":"test"},{"name":"suite","value":"test_dags_general"},{"name":"host","value":"fv-az1940-600"},{"name":"thread","value":"3940-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test.test_dags_general"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"dag","value":"<DAG: dbt_docs_generator>"},{"name":"dag_id","value":"'dbt_docs_generator'"},{"name":"fileloc","value":"'dags/dbt_docs_generator.py'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"tags":[]},"source":"86772ee8705bd067.json","parameterValues":["<DAG: dbt_docs_generator>","'dbt_docs_generator'","'dags/dbt_docs_generator.py'"]}